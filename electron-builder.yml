appId: com.oneclaw.app
productName: OneClaw
copyright: Copyright © 2025 OneClaw

directories:
  output: out

files:
  - dist/**/*
  - setup/**/*
  - assets/**/*
  - package.json

# afterPack 钩子：绕过 node_modules 剥离，直接注入 resources/ 到 app bundle
afterPack: ./scripts/afterPack.js

# --- macOS ---
mac:
  target: dmg
  icon: upstream/openclaw/apps/macos/Sources/OpenClaw/Resources/OpenClaw.icns
  category: public.app-category.productivity
  # 签名身份由 CSC_NAME 环境变量指定（见 .env），避免把证书名写入仓库
  hardenedRuntime: true
  gatekeeperAssess: false
  notarize: true

# 自动更新：指向阿里云 CDN
publish:
  provider: generic
  url: https://claw.ver0.cn/releases/

dmg:
  sign: false
  artifactName: "OneClaw-${version}-${arch}.${ext}"

# --- Windows ---
win:
  target: nsis
  icon: assets/icon.ico

nsis:
  oneClick: true
  perMachine: false
  createDesktopShortcut: true
  createStartMenuShortcut: true
  runAfterFinish: true
  artifactName: "OneClaw-Setup-${version}-${arch}.${ext}"
